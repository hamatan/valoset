<html>
<head>
    <title>valorantのvan9001 van9003 エラー対策(Ryzen5000/Ryzen3000シリーズ用)</title>
	<script>
	  function OpenDetails(i) {

		const AsusDetails   = document.querySelector("#asus");
		const AsrockDetails = document.querySelector("#asrock");
		const GigaDetails   = document.querySelector("#giga");
		const MSIDetails    = document.querySelector("#msi");
		const OpenList      = document.querySelector( i );

		AsusDetails.open    = false;
		AsrockDetails.open  = false;
		GigaDetails.open    = false;
		MSIDetails.open     = false;

	 	OpenList.open       = true;
	  }
	</script>
</head>
<body>
<h2>valorant の van9001 van9003 エラー対策</h2>
<div style="padding-left:0.5em;">
◆症状<br>
windows11で、valorantをプレイすると上記エラーでゲームが落ちる<br><br>

◆対象<br>
Ryzen5000シリーズ、Ryzen3000シリーズ搭載機<br><br>

◆設定項目<br>
fTPM、セキュアブートを有効、CSM無効(機種による)の3つ<br><br>


対象機種か解らない場合は、マイクラの座標表示のときに<br>
右上にRyzenやCore iのように表示されています。<br>
<img src="./pic/minecraft2.png" width="680" height="197"><br>
</div>

※Ryzen環境しかないのでIntel環境は別の記事を参照してください。<br>
※GeForce GTX1000シリーズの古いグラボを使用している場合は、<br>
　PCで<a href="https://www.nvidia.com/en-us/drivers/nv-uefi-update-x64/" target="_blank">グラボのファームウェアアップデート</a>を実行してから、<br>
　設定を行ってください。起動時に見失う問題が改善されます。<br>

<hr>

1.Windows11のメニューから再起動<br>
<div style="padding-left:0.5em;">
電源ボタンをクリックし、メニューが表示されたら<br>
キーボードのShiftキーを押し続けながら再起動をクリックする。<br>
お待ち下さいロード画面が出たら、Shiftキーを離す。<br>
<img src="./pic/win11_10.png" width="680" height="510"><br><br>
</div>

2.オプション画面からファームウェア設定へ<br>
<div style="padding-left:0.5em;">
トラブルシューティングを選択し、<br>詳細オプション→UEFIファームウェア設定へ進む。<br>
<img src="./pic/win11_11.png" width="340" height="255"> <img src="./pic/win11_12.png" width="340" height="255"><br>
<img src="./pic/win11_13.png" width="680" height="510"><br><br>
</div>

3.ファームウエアメニュー<br>
<div style="padding-left:0.5em;">
メーカーにより異なるので、最も近いメニューをタップしてください。<br>
※機種によりカラーリングが異なることがあります。<br>
※F2かDELキー押しっぱなしでPCの電源を入れても表示できます。<br>
<a href="#asus" onclick="OpenDetails('\#asus');"><img src="./pic/asus01.png" width="340" height="255"></a> <a href="#asrock" onclick="OpenDetails('\#asrock');"><img src="./pic/asrock01.png" width="340" height="255"></a><br>
<a href="#giga" onclick="OpenDetails('\#giga');"><img src="./pic/giga01.png" width="340" height="255"></a> <a href="#msi" onclick="OpenDetails('\#msi');"><img src="./pic/msi01.png" width="340" height="255"></a><br>
</div>

<hr>
<section>
  <details name="uefi" id="asus"><summary>UEFI BIOS Utility (ASUS)</summary>
	<p>表示言語が日本語の場合もありますが、大体英語のカタカナ読みです。<br>
	※キーボードの矢印キーとEnter(決定)、ESC(戻る)でも操作できます。<br>
	※機種により表記や色が異なる事があります。<br><br>

	4.ファームウェアの設定(fTPM)<br>
	<div style="padding-left:0.5em;">
	まず画面右下のAdvanced Mode(詳細モード) を選択します。<br>
	画面上部にある Advanced(詳細) タブを開くと、メニューの<br>
	一番上に AMD fTPM Config～が有るので、メニューに入ります。<br>
	TPM Device Selection を選ぶと、選択肢が表示されるので、<br>
	Firmware TPM(有効) にします。<br><br>

	・Advanced→AMD fTPM Config→TPM Device→Firmware TPM<br>
	<img src="./pic/asus02.png" width="340" height="255"> <img src="./pic/asus03.png" width="340" height="255"><br>
	<img src="./pic/asus04.png" width="680" height="510"><br><br>
	</div>

	5.セキュアブートの有効化<br>
	<div style="padding-left:0.5em;">
	画面上部の Boot(起動) タブを開き、上から三番目の SecureBoot<br>
	メニューに入り、OS Type を選択します。選択肢が表示されるので<br>
	Windows UEFI Mode に変更します。<br><br>

	・Boot→SecureBoot→OS Type→Windows UEFI<br>
	<img src="./pic/asus08b.png" width="340" height="255"><br>
	<img src="./pic/asus09.png" width="680" height="510"><br><br>
	</div>

	6.設定の保存<br>
	<div style="padding-left:0.5em;">
	画面上部にある Exit タブを開くと、上から二番目に Save Change～<br>
	(保存して再起動)が表示されるので、選択します。ポップアップで<br>
	選択肢が表示されるのでOKを選んで設定を保存し再起動します。<br>
	設定を保存せずに終了するには Discard Change &amp; Exit にします。<br><br>

	・Exit→Save Change &amp; Reset→OK<br>
	<img src="./pic/asus10.png" width="680" height="510"><br><br>
	</div>

	7.動作確認<br>
	<div style="padding-left:0.5em;">
	Windowsが起動したら、Valorantでエラーが出ないか確認します。<br>
	エラーが引き続き出る場合は、Windows11対応のファームウエアへ<br>
	更新が必要になる場合があります。<br><br>
	</div>

	※トラブルシューティング<br>
	<div style="padding-left:0.5em;">
	windows11のローディングに失敗するようになった場合は、<br>
	手順 5(Other OS)を戻してみてください。<br><br>

	キーボードのDELキーを押し続けながらPCの電源を入れると<br>
	ファームウェア画面へ戻れます。<br>
	</div>
	</p></details>
<hr>
　<details name="uefi" id="asrock"><summary>ASRock</summary>
	<p>表示言語が日本語の場合もありますが、大体英語のカタカナ読みです。<br>
	※キーボードの矢印キーとEnter(決定)、ESC(戻る)でも操作できます。<br>
	※機種により表記や色が異なる事があります。<br><br>

	4.ファームウェアの設定(fTPM)<br>
	<div style="padding-left:0.5em;">
	まず Advanced Mode(詳細モード) の項目がある機種は選択します。<br>
	無い機種はそのまま Advanced(詳細) タブを開いて下さい。一番上の<br>
	CPU Config～ メニューに入り、画面下側の AMD fTPM Switchを選択<br>
	すると、選択肢が表示されるので AMD CPU fTPM に変更します。<br>
	その項目が無い場合は Enabled(有効)にします。<br><br>

	・Advanced→CPU Config→fTPM (有効)<br>
	<img src="./pic/asrock02a.png" width="340" height="255"> <img src="./pic/asrock03a.png" width="340" height="255"><br>
	<img src="./pic/asrock04.png" width="680" height="510"><br><br>
	</div>

	5.起動設定(CSM)<br>
	<div style="padding-left:0.5em;">
	最上段の Boot タブを開き、画面下のCSM～(互換サポートモジュール)<br>
	メニューに入ります。メニュー 一番上のCSMを選択すると、選択肢が<br>
	表示されるので、Disabled(無効)にします。<br><br>

	・Boot→CSM(互換サポートモジュール)→CSM 無効<br>
	<img src="./pic/asrock05.png" width="340" height="255"> <img src="./pic/asrock06.png" width="340" height="255"><br><br>
	</div>

	6.セキュアブートモードの設定<br>
	<div style="padding-left:0.5em;">
	最上段の Security タブを開き、SecureBootメニューに入ります。<br>
	Secure Boot の項目を<span style="font-weight:bold;">いったんDisabled(無効)</span>にします。<br>
	Secure Boot Mode を選択すると、選択肢が表示されるので、<br>
	Standard(標準) にします。<br><br>

	・Security→Secure Boot→Secure Boot 無効<br>
	・Security→Secure Boot→Secure Boot Mode→Standard 標準<br>
	・Security→Secure Boot→Secure Boot 有効<br>
	<img src="./pic/asrock07.png" width="340" height="255"> <img src="./pic/asrock08.png" width="340" height="255"><br>
	<img src="./pic/asrock09.png" width="680" height="510"><br><br>
	</div>

	7.セキュアブートの有効化<br>
	<div style="padding-left:0.5em;">
	Secure Boot の項目を Enabled(有効)にします。<br>
	<img src="./pic/asrock10.png" width="680" height="510"><br><br>
	</div>

	8.設定の保存<br>
	<div style="padding-left:0.5em;">
	最上段の Exit タブを開きます。Save Change and Exit を選択すると、<br>
	選択肢が出るのでYESにして設定を保存し再起動します。<br>
	保存せずに終了するには Discard Change and Exit にします。<br><br>

	・Exit→Save Change and Exit<br>
	<img src="./pic/asrock11.png" width="680" height="510"><br><br>
	</div>

	9.動作確認<br>
	<div style="padding-left:0.5em;">
	Windowsが起動したら、Valorantでエラーが出ないか確認します。<br>
	エラーが引き続き出る場合は、<a href="https://www.asrock.com/support/faq.jp.asp?id=531" target="_blank">公式の手順</a>か<a href="https://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q11278912276" target="_blank">こちらの手順</a>を試してみてください。<br><br>
	</div>

	※トラブルシューティング<br>
	<div style="padding-left:0.5em;">
	windows11のローディングに失敗するようになった場合は、<br>
	手順5と6をCSM有効、SecureBoot無効に戻してみてください。<br><br>

	キーボードのDELキーを押し続けながらPCの電源を入れると<br>
	ファームウェア画面へ戻れます。<br>
	</div>
	</p></details>
<hr>
　<details name="uefi" id="giga"><summary>AORUS (Gigabyte)</summary>
	<p>項目の場所や表記が機種によってバラバラなうえ、手順が複雑で<br>
	難易度が高く、全てのステップを正確に書けてるかは怪しいので、<br>
	設定変更はおすすめしません。<br><br>

	※ファームウェアの更新をすれば難易度は下がると思われますが、<br>
	<div style="padding-left:1.0em;">
	BTOなどでは Windows の認証キーがファームウェアに含まれている<br>
	場合が有り、BTOメーカー以外のファームウェアを書き込むと、キー<br>
	情報が消えてOSの認証が外れる事があるのでご注意ください。<br><br>
	</div>

	※言語が日本語の場合もありますが、大体英語のカタカナ読みです。<br>
	※キーボードの矢印キーとEnter(決定)、ESC(戻る)でも操作できます。<br>
	※機種により表記や色が異なる事があります。<br><br>

	4.ファームウェアの設定(fTPM)<br>
	<div style="padding-left:0.5em;">
	まず画面右側のAdvanced Mode(詳細モード) を選択します。画面上部<br>
	にある Settings を選択し、AMD CPU fTPM を Enabled(有効) にします。<br>
	※Settings - Miscellaneous サブメニューの中に有る機種もあります。<br>
	※Settings が Peripherals 表記の場合も有ります。<br><br>

	・Settings→AMD CPU fTPM 有効<br>
	※Settings→Miscellaneous→AMD CPU fTPM の場合もあり<br>
	※fTPMの項目がどこかに有るから探す<br>
	<img src="./pic/giga05b.png" width="680" height="510"><br><br>
	</div>

	5.起動設定(CSM)<br>
	<div style="padding-left:0.5em;">
	最上段の Boot タブを開き、画面中段のCSM Support(互換サポート～)<br>
	を選択すると、選択肢が表示されるので Disabled(無効)にします。<br><br>

	・Boot→CSM Support 無効<br>
	<img src="./pic/giga06.png" width="680" height="510"><br><br>

	最上段の Save &amp; Exit を選択し、Save &amp; Exit Setup を選択後 YESを<br>
	押すと再起動するので、画面が暗転したらキーボードの DELキー を<br>
	押し続けて再びファームウェア画面へ戻ります。<br>
	※Windowsが起動した場合は、手順1～3でファームウェアメニューへ<br><br>

	・Save &amp; Exit→Save &amp Exit Setup<br>
	<img src="./pic/giga06b.png" width="680" height="510"><br><br>
	</div>

	6.セキュアブートモードの設定<br>
	<div style="padding-left:0.5em;">
	最上段の Boot を選択し、SecureBootメニューに入ります。<br>
	Secure Boot Mode の項目をいったん <span style="font-weight:bold;">Custom</span>にします。<br>
	次に RestoreFactory Keys を選択すると、選択肢が出るので YESを<br>
	選択します。もう一度選択肢が出るので、YESを選択して再起動します。<br>
	画面が暗転したらキーボードのDELキーを押し続けて再びファーム<br>
	ウェア画面へ戻ります。<br>
	※Windowsが起動した場合は、手順1～3でファームウェアメニューへ<br><br>

	・Boot→Secure Boot→Secure Boot Mode→Custom<br>
	・Boot→Secure Boot→RestoreFactory Keys<br>
	<img src="./pic/giga07.png" width="340" height="255"> <img src="./pic/giga08.png" width="340" height="255"><br><br>
	</div>

	7.セキュアブートの有効化<br>
	<div style="padding-left:0.5em;">
	最上段の Boot を選択し、再びSecureBootメニューに入ります。<br>
	SecureBootの項目がEnabled(有効)にし、Activeになっていたら、<br>
	SecureBootModeをStandardへ戻します。<br><br>

	・Boot→Secure Boot→Secure Boot 有効<br>
	<img src="./pic/giga09.png" width="680" height="510"><br><br>
	</div>

	8.設定の保存<br>
	<div style="padding-left:0.5em;">
	最上段の Save &amp; Exit を選択し、Save &amp; Exit Setup を選択後 YES<br>
	を押して設定を保存します。<br><br>

	・Save &amp; Exit→Save &amp Exit Setup<br>
	<img src="./pic/giga06b.png" width="680" height="510"><br><br>
	</div>

	9.動作確認<br>
	<div style="padding-left:0.5em;">
	Windowsが起動したら、Valorantでエラーが出ないか確認します。<br>
	手順が複雑すぎて、すべてのステップを正確に書けているかは正直<br>
	あやしいです。解決しない場合は以下の手順を試してみてください。<br>
	<a href="https://www.youtube.com/watch?v=lwaIWu_41_0" target="_blank">How to Enable Secure Boot on AORUS Motherboard (Youtube)</a><br>
	<a href="https://x.com/AORUS_JP/status/1408268492147617793" target="_blank">GIGABYTE X570 UD マザーボード例 (公式twitter)</a><br>
	<a href="https://support.pcdiy.newx.co.jp/hc/ja/articles/6572156997657--GIGABYTE%E3%83%9E%E3%82%B6%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E5%85%A8%E8%88%AC-Secure-Boot-%E3%81%AE%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6" target="_blank">【GIGABYTEマザーボード全般】Secure Boot の設定方法について(代理店)</a><br>
	<a href="https://bbs.kakaku.com/bbs/K0001326216/SortID=24941106/" target="_blank">セキュアブートはどうやって有効にすればいいのでしょうか？ (B550 AORUS ELITE V2)</a><br>
	<a href="https://www.reddit.com/r/gigabyte/comments/udde6g/x570_aorus_elite_wifi_mobo_secure_boot/" target="_blank">X570 Aorus Elite Wifi Mobo, secure boot problem/tpm2.0 (アメリカ語)</a><br>
	<a href="https://www.reddit.com/r/gigabyte/comments/ocimkx/x570_elite_mobo_secure_boot_problem/" target="_blank">X570 Elite Mobo, secure boot problem (アメリカ語)</a><br><br>
	</div>

	※トラブルシューティング<br>
	<div style="padding-left:0.5em;">
	windows11のローディングに失敗するようになった場合は、<br>
	手順5と7をCSM有効、SecureBoot無効に戻してみてください。<br><br>

	キーボードのDELキーを押し続けながらPCの電源を入れると<br>
	ファームウェア画面へ戻れます。<br>
	</div>
	</p></details>
<hr>
　<details name="uefi" id="msi"><summary>MSI</summary>
	<p>言語が日本語の場合もありますが、大体英語のカタカナ読みです。<br>
	※キーボードの矢印キーとEnter(決定)、ESC(戻る)でも操作できます。<br>
	※機種により表記や色が異なる事があります。<br><br>

	4.ファームウェアの設定(fTPM)<br>
	<div style="padding-left:0.5em;">
	まず画面上部のAdvanced Mode(詳細モード) を選択します。画面左側<br>
	にある SETTINGS タブを開きます。Security メニューに入り<br>
	Trusted Computing の項目に進みます。<br><br>
	Security Device Support を選択すると、選択肢が出るので Enable<br>
	(有効)にします。その下の AMD fTPM Switch が <span style="font-weight:bold;">AMD CPU fTPM</span> に<br>
	なっている事を確認します。<br><br>

	・SETTINGS→Security→Trusted Computing→Security Device Support 有効<br>
	・SETTINGS→Security→Trusted Computing→AMD fTPM Switch→AMD CPU fTPM<br>
	<img src="./pic/msi02.png" width="340" height="255"> <img src="./pic/msi03.png" width="340" height="255"><br>
	<img src="./pic/msi04.png" width="680" height="510"><br><br>
	</div>

	5.起動設定(CSM)<br>
	<div style="padding-left:0.5em;">
	画面左のSETTINGS から、Advanced(拡張項目)メニューに入ります。<br>
	中央下の Windows OS Config～ へ進み、<br>
	BIOS UEFI/CSM Mode を UEFI にします。<br><br>

	・SETTINGS→Advanced→Windows OS Config→UEFI/CSM→UEFI<br>
	<img src="./pic/msi05.png" width="340" height="255"> <img src="./pic/msi06.png" width="340" height="255"><br>
	<img src="./pic/msi07.png" width="680" height="510"><br><br>
	</div>

	6.セキュアブートの有効化<br>
	<div style="padding-left:0.5em;">
	一番下の SecureBoot メニューに入ります。<br>
	Secure Boot Mode を選択、選択肢は Standard にします。<br>
	Secure Boot の項目を選択、選択肢は Enabled(有効)にします。<br>
	エラーが表示された場合は、Enroll All Factory Default Keys を<br>
	ロードしてみてください。<br><br>

	・SETTINGS→Advanced→Win OS Config→Secure Boot→Secure Boot Mode→Standard<br>
	・SETTINGS→Advanced→Win OS Config→Secure Boot→Secure Boot 有効<br>
	<img src="./pic/msi08.png" width="340" height="255"> <img src="./pic/msi09b.png" width="340" height="255"><br>
	<img src="./pic/msi09a.png" width="680" height="510"><br><br>
	</div>

	7.設定の保存<br>
	<div style="padding-left:0.5em;">
	画面左のSETTINGS から、一番下の Save &amp; Exit(保存と終了)メニュー<br>
	に入ります。Save Changes and Reboot(保存して再起動)を選択して<br>
	設定を保存します。<br>
	設定を保存せずに終了するには Discard Changes and Exit にします。<br><br>

	・SETTINGS→Save &amp; Exit→Save Changes and Reboot<br>
	<img src="./pic/msi12.png" width="340" height="255"><br>
	<img src="./pic/msi13.png" width="680" height="510"><br><br>
	</div>

	8.動作確認<br>
	<div style="padding-left:0.5em;">
	Windowsが起動したら、Valorantでエラーが出ないか確認します。<br>
	エラーが引き続き出る場合は、手順 6.のエラーが表示された場合を<br>
	試してみてください。また下記の記事を参照してみてください。<br>
	<a href="https://gamepc-base.jp/varorant-tpm-error-msi/" target="_blank">VALORANT TPM2.0エラー VAN9001の対処方法｜MSIマザーボード編</a><br><br>
	</div>

	※トラブルシューティング<br>
	<div style="padding-left:0.5em;">
	windows11のローディングに失敗するようになった場合は、<br>
	手順5と6をCSMをCSM、SecureBoot無効に戻してみてください。<br><br>

	キーボードのDELキーを押し続けながらPCの電源を入れると<br>
	ファームウェア画面へ戻れます。<br>
	</div>
	</p></details>
<hr>
　<details name="uefi" id="error"><summary>起動しなくなった時は</summary>
	<p><div style="padding-left:0.5em;">
	CSM を無効にすると、グラボを起動時に見失う場合や、<br>
	古い構成のSSDを見失ってwindowsのロードに失敗する事<br>
	があります。<br><br>

	・画面は映るがエラーでWindowsが起動しない<br>
	SSDのCドライブやDドライブの構成が古いため起こります。<br>
	SecureBootをDisabled(無効)、CSMをEnabled(有効)に戻します。<br><br>

	・画面が映らない、エラー音(ﾋﾟｰﾋﾟｰﾋﾟｰﾋﾟｰ)などが鳴る<br>
	グラボのファームウエアが古いため起こります。<br>
	HDMIケーブルのみを接続しても何も映らない場合は<br><br>

	PC本体のコンセントを抜き、側面パネルを取り外し<br>
	マザボ上のボタン電池を取り外してください。<br>
	15分ほど放置したのち、ボタン電池を取り付け<br>
	側面パネルを戻しコンセントを接続して電源を入れます。<br><br>

	<img src="./pic/cmos_clear.png" width="610" height="813"><br><br>
	なんだかんだAsusのファーム(BIOS)はよく出来てると思った。<br>
	ちゃんと詰まないようにできてる。逆にGIGAは俺でも解らん…<br><br>
	</div>
 	</p></details>
</section>
<hr>


<br><br>
</body>
</html>
